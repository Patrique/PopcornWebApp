!function(){"use strict";angular.module("popcorn",["ngResource","ngAria","ngMaterial","ngMdIcons","ngCookies","ngAnimate","ngSanitize","ui.router","home","popular","trending","recent","infinite-scroll","movie","angular-imagefit","jkAngularRatingStars","youtube-embed","SignalR"])}(),function(){"use strict";function a(a,b,c,d,e){c.hashPrefix("!"),e.theme("docs-dark","default").primaryPalette("orange").dark(),b.otherwise("/trending")}function b(a){}angular.module("popcorn").config(a).run(b),angular.module("infinite-scroll").value("THROTTLE_MILLISECONDS",1e3),a.$inject=["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$mdThemingProvider"],b.$inject=["$rootScope"]}(),function(){"use strict";angular.module("home",[])}(),function(){"use strict";angular.module("movie",[])}(),function(){"use strict";angular.module("popular",["ngResource"])}(),function(){"use strict";angular.module("recent",["ngResource"])}(),function(){"use strict";angular.module("SignalR",[])}(),function(){"use strict";angular.module("trending",["ngResource"])}(),angular.module("popcorn").config(["$stateProvider",function(a){a.state("home",{url:"","abstract":!0,templateUrl:"app/modules/home/home.html",controller:"HomeCtrl",controllerAs:"vm"})}]),angular.module("movie").config(["$stateProvider",function(a){a.state("home.movie",{url:"/:id",templateUrl:"app/modules/movie/movie.html",controller:"MovieCtrl",controllerAs:"vm"})}]),angular.module("popular").config(["$stateProvider",function(a){a.state("home.popular",{url:"/popular",templateUrl:"app/modules/popular/popular.html",controller:"PopularCtrl",controllerAs:"vm"})}]),angular.module("recent").config(["$stateProvider",function(a){a.state("home.recent",{url:"/recent",templateUrl:"app/modules/recent/recent.html",controller:"RecentCtrl",controllerAs:"vm"})}]),angular.module("trending").config(["$stateProvider",function(a){a.state("home.trending",{url:"/trending",templateUrl:"app/modules/trending/trending.html",controller:"TrendingCtrl",controllerAs:"vm"})}]),function(){"use strict";function a(){}angular.module("popcorn").controller("HomeCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){var j=this;j.loading=!1,f.$on("loading",function(){j.loading=!0}),f.$on("loaded",function(){j.loading=!1}),j.tabIndex=c.current.name,f.$on("$stateChangeSuccess",function(a,b){j.tabIndex=b.name}),j.toggleSidenav=function(b){a(b).toggle()},j.querySearch=function(a){var b=h.defer();return g.search(a).$promise.then(function(a){0===a.data.movie_count?b.resolve([]):b.resolve(a.data.movies)}),b.promise},j.searchTextChange=function(a){},j.selectedItemChange=function(a){j.showSearch=!1,j.searchText="",void 0!==a&&c.go("home.movie",{id:a.id})}}angular.module("popcorn").controller("LayoutCtrl",a),a.$inject=["$mdSidenav","$cookies","$state","$mdToast","$mdDialog","$rootScope","SearchService","$q","$timeout"]}(),function(){"use strict";function a(a,b,c,d,e){var f=this;e(e.defaultServer,"PopcornHub");f.movie={},f.loaded=!1,b.getMovie(a.id).$promise.then(function(a){return f.movie=a.data.movie,f.movie.rating=Math.round(f.movie.rating/2),f.movie.genre=f.movie.genres.join(", "),b.getTMDbInfo(f.movie.imdb_code).$promise}).then(function(a){f.movie.background="https://image.tmdb.org/t/p/original"+a.movie_results[0].backdrop_path,console.log(f.movie)})["catch"](function(a){f.loaded=!0}),f.imageLoaded=function(){c.$apply(function(){f.loaded=!0,d(function(){$(window).trigger("resize")},500)})},f.check={scale:"best-fill",onLoad:function(a,b){},onError:function(a,b){},onStart:function(a,b){},align:"center",parent:null,hideParentOverflow:!0,fadeInDuration:400,rescaleOnResize:!0,didScale:function(a,b){}}}angular.module("movie").controller("MovieCtrl",a),a.$inject=["$stateParams","MovieService","$scope","$timeout","Hub"]}(),function(){"use strict";function a(a,b){var c=this;c.page=0,c.movies=[];var d=function(d){a.getMovies(d).$promise.then(function(a){if(c.page!==a.data.page_number){c.page=a.data.page_number;for(var d=0;d<a.data.movies.length;d++)c.movies.push(a.data.movies[d]);b.$broadcast("loaded")}})["catch"](function(a){b.$broadcast("loaded")})};c.paginate=function(){b.$broadcast("loading"),d(c.page+1)}}angular.module("popular").controller("PopularCtrl",a),a.$inject=["PopularService","$rootScope"]}(),function(){"use strict";function a(a,b){var c=this;c.page=0,c.movies=[];var d=function(d){a.getMovies(d).$promise.then(function(a){if(c.page!==a.data.page_number){c.page=a.data.page_number;for(var d=0;d<a.data.movies.length;d++)c.movies.push(a.data.movies[d]);b.$broadcast("loaded")}})["catch"](function(a){b.$broadcast("loaded")})};c.paginate=function(){b.$broadcast("loading"),d(c.page+1)}}angular.module("recent").controller("RecentCtrl",a),a.$inject=["RecentService","$rootScope"]}(),function(){"use strict";function a(a,b){var c=this;c.page=0,c.movies=[];var d=function(d){a.getMovies(d).$promise.then(function(a){if(c.page!==a.data.page_number){c.page=a.data.page_number;for(var d=0;d<a.data.movies.length;d++)c.movies.push(a.data.movies[d]);b.$broadcast("loaded")}})["catch"](function(a){b.$broadcast("loaded")})};c.paginate=function(){b.$broadcast("loading"),d(c.page+1)}}angular.module("trending").controller("TrendingCtrl",a),a.$inject=["TrendingService","$rootScope"]}(),function(){"use strict";function a(a){return{search:function(b){return a("https://yts.ag/api/v2/list_movies.json").get({query_term:b})}}}angular.module("popular").factory("SearchService",a),a.$inject=["$resource"]}(),function(){"use strict";function a(a){return{getMovie:function(b){return a("https://yts.ag/api/v2/movie_details.json").get({movie_id:b,with_images:"true",with_cast:"true"})},getTMDbInfo:function(b){return a("https://api.themoviedb.org/3/find/:id").get({api_key:"a21fe922d3bac6654e93450e9a18af1c",id:b,external_source:"imdb_id"})}}}angular.module("movie").factory("MovieService",a),a.$inject=["$resource"]}(),function(){"use strict";function a(a){return{getMovies:function(b){return a("https://yts.ag/api/v2/list_movies.json").get({sort_by:"rating",page:b,limit:"30"})}}}angular.module("popular").factory("PopularService",a),a.$inject=["$resource"]}(),function(){"use strict";function a(a){return{getMovies:function(b){return a("https://yts.ag/api/v2/list_movies.json").get({sort_by:"date_added",page:b,limit:"30"})}}}angular.module("recent").factory("RecentService",a),a.$inject=["$resource"]}(),function(){"use strict";angular.module("SignalR").constant("$",$).constant("backendServerUrl","http://popcorn.westeurope.cloudapp.azure.com").factory("Hub",["$","$rootScope","backendServerUrl",function(a,b,c){function d(d,e){var f=a.hubConnection(c),g=f.createHubProxy(e);return f.start().done(function(){}),{on:function(a,c){g.on(a,function(a){b.$apply(function(){c&&c(a)})})},invoke:function(a,c){g.invoke(a).done(function(a){b.$apply(function(){c&&c(a)})})}}}return d}])}(),function(){"use strict";function a(a){return{getMovies:function(b){return a("https://yts.ag/api/v2/list_movies.json").get({sort_by:"download_count",page:b,limit:"30"})}}}angular.module("trending").factory("TrendingService",a),a.$inject=["$resource"]}(),function(){"use strict";angular.module("popcorn").directive("imageonload",function(){return{restrict:"A",scope:{imgloaded:"&"},link:function(a,b,c){b.bind("load",function(){a.imgloaded()}),b.bind("error",function(){})}}})}();